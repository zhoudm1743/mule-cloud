# 🚀 快速启动指南

## 1️⃣ 安装依赖

```bash
yarn install
```

## 2️⃣ 配置后端地址

修改 `src/utils/request.js` 第6行：

```javascript
const BASE_URL = 'http://192.168.31.78:8003/admin'; // 改为你的网关地址
```

## 3️⃣ 配置小程序AppID

修改 `src/manifest.json` 第34行：

```json
"mp-weixin": {
  "appid": "wxYOUR_APPID_HERE"  // 改为你的小程序AppID
}
```

> 💡 如果没有小程序AppID，可以先使用测试AppID：`wxtest123456`

## 4️⃣ 启动开发服务器

### 方式一：使用 HBuilderX（推荐）

1. 打开 HBuilderX
2. 文件 -> 打开目录 -> 选择 `wxApp` 文件夹
3. 运行 -> 运行到小程序模拟器 -> 微信开发者工具

### 方式二：使用命令行

```bash
# 微信小程序
yarn dev:mp-weixin

# H5预览
yarn dev:h5
```

编译产物在 `dist/dev/mp-weixin` 目录

## 5️⃣ 在微信开发者工具中打开

1. 打开微信开发者工具
2. 导入项目
3. 选择 `dist/dev/mp-weixin` 目录
4. 输入 AppID（或选择测试号）
5. 点击"导入"

## 6️⃣ 测试登录

1. 点击"微信一键登录"
2. 如果是首次登录，输入企业邀请码（租户的 `code` 字段）
3. 绑定成功后进入首页

## 📋 后端服务要求

确保后端服务已启动：

- **小程序微服务**: `http://localhost:8007`
- **网关服务**: `http://localhost:8003`

启动命令：

```bash
# 启动小程序服务
go run cmd/miniapp/main.go -config config/miniapp.yaml

# 启动网关服务
go run cmd/gateway/main.go -config config/gateway.yaml
```

## 🔧 开发工具配置

### 微信开发者工具设置

1. 设置 -> 项目设置
2. 勾选"不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书"
3. 勾选"启用 ES6 转 ES5"
4. 勾选"启用增强编译"

## ⚠️ 常见问题

### 1. 编译报错

```bash
# 清理缓存重新安装
rm -rf node_modules
rm yarn.lock
yarn install
```

### 2. 请求失败

- 检查后端服务是否启动
- 检查 BASE_URL 配置是否正确
- 检查"不校验合法域名"是否勾选

### 3. 组件不显示

- 检查 uv-ui 是否安装：`yarn list @climblee/uv-ui`
- 如果未安装：`yarn add @climblee/uv-ui`

### 4. 微信登录失败

- 检查 AppID 配置是否正确
- 检查后端 `config/miniapp.yaml` 中的 AppID 和 AppSecret
- 确保使用真实的小程序AppID（测试号不支持UnionID）

## 🎯 下一步

- [ ] 修改 AppID 为真实小程序AppID
- [ ] 配置后端服务地址
- [ ] 测试登录流程
- [ ] 测试租户切换
- [ ] 开发业务功能

## 📚 相关文档

- [uniapp 官方文档](https://uniapp.dcloud.net.cn/)
- [uv-ui 组件文档](https://www.uvui.cn/)
- [微信小程序官方文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [后端API文档](../app/miniapp/README.md)

## 📞 技术支持

遇到问题？

1. 查看控制台错误信息
2. 查看网络请求响应
3. 查看后端日志
4. 联系技术支持

