# 快速调试 - 租户菜单权限问题 🔍

## 现状

- ✅ 代码已添加调试日志
- ✅ 默认租户只分配了 system 相关菜单
- ❌ 用户反馈：租户能看到 basic 菜单

## 🚀 立即调试

### 1. 重启 auth 服务（必须）

```powershell
# 停止 auth 服务（Ctrl+C）

# 重启
go run cmd/auth/main.go
```

### 2. 租户用户登录

- 账号: 13838383388
- 密码: 123456
- 租户: 测试租户 (default)

### 3. 查看 auth 服务的控制台输出

**应该看到**:
```
[调试] 角色 xxx 的菜单数量: 6
[调试]   1. dashboard (仪表盘)
[调试]   2. system (系统管理)
[调试]   3. system_admin (管理员管理)
[调试]   4. system_role (角色管理)
[调试]   5. system_menu (菜单管理)
[调试]   6. system_tenant (租户管理)
```

**如果看到**:
```
[调试] 角色 xxx 的菜单数量: 15
[调试]   1. dashboard (仪表盘)
[调试]   2. basic (基础信息)        ← 不应该有这个！
[调试]   3. color (颜色管理)        ← 不应该有这个！
```

**说明角色已被修改** - 手动给角色添加了 basic 菜单！

---

## 🎯 解决方案

### 如果角色被修改了：

#### 方法1: 通过前端修改（推荐）

1. **系统管理员登录**
2. **切换到该租户** - 用顶部的租户选择器
3. **进入 "系统管理 → 角色管理"**
4. **编辑 "租户管理员" 角色**
5. **取消勾选** basic、颜色、尺码等菜单
6. **保存**

#### 方法2: 重新创建租户

1. 删除现有租户
2. 重新创建租户
3. 新租户将使用默认配置

---

## 📊 验证方法

### 浏览器 F12

1. 打开浏览器 F12
2. Network 标签
3. 找到 `getUserRoutes` 请求
4. 查看 Response

**期望返回**:
```json
{
  "code": 0,
  "data": {
    "routes": [
      {"name": "dashboard", "title": "仪表盘"},
      {"name": "system", "title": "系统管理"},
      {"name": "system_admin", "title": "管理员管理"},
      {"name": "system_role", "title": "角色管理"},
      {"name": "system_menu", "title": "菜单管理"},
      {"name": "system_tenant", "title": "租户管理"}
    ]
  }
}
```

**不应该有**:
- basic
- color
- size
- customer
- 等等...

---

## 🎉 成功标志

修复后，租户用户登录应该只看到：

```
左侧菜单栏:
├── Dashboard
└── 系统管理
    ├── 管理员管理
    ├── 角色管理
    ├── 菜单管理
    └── 租户管理
```

**不会看到**:
- 基础信息
- 颜色管理
- 尺码管理
- 等等

---

## 📝 请提供

重启 auth 服务后，**把控制台的调试日志截图或复制给我**，我可以帮你分析！
