# ç§Ÿæˆ·èœå•æƒé™è°ƒè¯•æŒ‡å—

## ğŸ” é—®é¢˜ç°è±¡

ç”¨æˆ·æŠ¥å‘Šï¼šæ²¡æœ‰ç»™ç§Ÿæˆ·åˆ†é…"åŸºç¡€ä¿¡æ¯"èœå•ï¼Œä½†ç§Ÿæˆ·ç”¨æˆ·èƒ½çœ‹åˆ°ã€‚

## ğŸ“Š é»˜è®¤æƒé™é…ç½®

### åˆ›å»ºç§Ÿæˆ·æ—¶çš„é»˜è®¤èœå•

**`app/system/services/tenant.go:167-174`**

```go
defaultMenus := []string{
    "dashboard",           // âœ… ä»ªè¡¨ç›˜
    "system",              // âœ… ç³»ç»Ÿç®¡ç†
    "system_admin",        // âœ… ç®¡ç†å‘˜ç®¡ç†
    "system_role",         // âœ… è§’è‰²ç®¡ç†
    "system_menu",         // âœ… èœå•ç®¡ç†
    "system_tenant",       // âœ… ç§Ÿæˆ·ç®¡ç†
}
```

**ç»“è®º**: é»˜è®¤**ä¸åŒ…å«**ä»»ä½• basic ç›¸å…³èœå•ï¼ˆé¢œè‰²ã€å°ºå¯¸ç­‰ï¼‰âŒ

---

## ğŸ› å¯èƒ½çš„åŸå› 

### 1. å‰ç«¯ç¼“å­˜

**æ£€æŸ¥æ–¹æ³•**:
1. æ‰“å¼€æµè§ˆå™¨ F12
2. Application â†’ Local Storage
3. æŸ¥æ‰¾ `routes` æˆ– `menus` ç›¸å…³çš„ç¼“å­˜
4. æ¸…é™¤ç¼“å­˜ï¼Œå¼ºåˆ¶åˆ·æ–°ï¼ˆCtrl+Shift+Rï¼‰

### 2. å‰ç«¯é™æ€è·¯ç”±

**æ£€æŸ¥æ–‡ä»¶**: `frontend/src/router/routes.static.ts` æˆ– `routes.inner.ts`

å¦‚æœå‰ç«¯æœ‰é™æ€é…ç½®çš„è·¯ç”±ï¼Œä¸ä¾èµ–åç«¯è¿”å›ï¼Œåˆ™ä¼šå§‹ç»ˆæ˜¾ç¤ºã€‚

### 3. è§’è‰²å·²è¢«ä¿®æ”¹

ç”¨æˆ·å¯èƒ½å·²ç»é€šè¿‡"è§’è‰²ç®¡ç†"é¡µé¢ï¼Œæ‰‹åŠ¨ç»™ç§Ÿæˆ·ç®¡ç†å‘˜è§’è‰²æ·»åŠ äº† basic ç›¸å…³èœå•ã€‚

**æ£€æŸ¥æ–¹æ³•**:
1. ç™»å½•ç³»ç»Ÿç®¡ç†å‘˜
2. åˆ‡æ¢åˆ°è¯¥ç§Ÿæˆ·
3. è¿›å…¥"ç³»ç»Ÿç®¡ç† â†’ è§’è‰²ç®¡ç†"
4. ç¼–è¾‘"ç§Ÿæˆ·ç®¡ç†å‘˜"è§’è‰²
5. æŸ¥çœ‹"åˆ†é…æƒé™èœå•"é‡Œæ˜¯å¦å‹¾é€‰äº† basic ç›¸å…³èœå•

---

## ğŸ¯ è°ƒè¯•æ­¥éª¤

### æ­¥éª¤1: æ£€æŸ¥åç«¯è¿”å›çš„èœå•

**åœ¨æµè§ˆå™¨ F12 Network ä¸­æŸ¥çœ‹**:

1. æ‰¾åˆ° `getUserRoutes` è¯·æ±‚
2. æŸ¥çœ‹ Response:
```json
{
  "code": 0,
  "data": {
    "routes": [
      // è¿™é‡Œåº”è¯¥åªæœ‰ dashboard å’Œ system ç›¸å…³çš„
      // å¦‚æœæœ‰ basicï¼Œè¯´æ˜è§’è‰²å·²è¢«ä¿®æ”¹
    ]
  }
}
```

### æ­¥éª¤2: æ·»åŠ æ—¥å¿—

**åœ¨ `app/auth/services/auth.go` ä¸­æ·»åŠ è°ƒè¯•æ—¥å¿—**:

```go
// è·å–ç”¨æˆ·æ‰€æœ‰è§’è‰²çš„èœå•æƒé™ï¼ˆåˆå¹¶å»é‡ï¼‰
menuMap := make(map[string]dto.RouteItem)
for _, roleID := range admin.Roles {
    menus, err := s.fetchRoleMenusFromSystem(ctx, roleID)
    if err != nil {
        fmt.Printf("è­¦å‘Š: è·å–è§’è‰² %s èœå•å¤±è´¥: %v\n", roleID, err)
        continue
    }
    
    // âœ… æ·»åŠ è¿™è¡Œæ—¥å¿—
    fmt.Printf("[è°ƒè¯•] è§’è‰² %s çš„èœå•æ•°é‡: %d\n", roleID, len(menus))
    for i, menu := range menus {
        fmt.Printf("[è°ƒè¯•]   %d. %s (%s)\n", i+1, menu.Name, menu.Title)
    }
    
    for _, menu := range menus {
        menuMap[menu.ID] = menu
    }
}
```

### æ­¥éª¤3: æŸ¥çœ‹åç«¯æ—¥å¿—

**é‡å¯ auth æœåŠ¡å**:
```
go run cmd/auth/main.go
```

**ç™»å½•ç§Ÿæˆ·ç”¨æˆ·ï¼ŒæŸ¥çœ‹è¾“å‡º**:
```
[è°ƒè¯•] è§’è‰² xxx çš„èœå•æ•°é‡: 6
[è°ƒè¯•]   1. dashboard (ä»ªè¡¨ç›˜)
[è°ƒè¯•]   2. system (ç³»ç»Ÿç®¡ç†)
[è°ƒè¯•]   3. system_admin (ç®¡ç†å‘˜ç®¡ç†)
[è°ƒè¯•]   4. system_role (è§’è‰²ç®¡ç†)
[è°ƒè¯•]   5. system_menu (èœå•ç®¡ç†)
[è°ƒè¯•]   6. system_tenant (ç§Ÿæˆ·ç®¡ç†)
```

å¦‚æœçœ‹åˆ° `basic`ã€`color` ç­‰ï¼Œè¯´æ˜è§’è‰²å·²è¢«ä¿®æ”¹ã€‚

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: é‡æ–°åˆ›å»ºç§Ÿæˆ·

å¦‚æœè§’è‰²å·²è¢«ä¿®æ”¹ï¼Œæœ€ç®€å•çš„æ–¹æ³•ï¼š
1. åˆ é™¤ç°æœ‰ç§Ÿæˆ·
2. é‡æ–°åˆ›å»ºç§Ÿæˆ·
3. æ–°åˆ›å»ºçš„ç§Ÿæˆ·å°†ä½¿ç”¨é»˜è®¤æƒé™

### æ–¹æ¡ˆ2: æ‰‹åŠ¨ä¿®æ”¹è§’è‰²æƒé™

1. ç³»ç»Ÿç®¡ç†å‘˜ç™»å½•
2. åˆ‡æ¢åˆ°è¯¥ç§Ÿæˆ·
3. è¿›å…¥"è§’è‰²ç®¡ç†"
4. ç¼–è¾‘"ç§Ÿæˆ·ç®¡ç†å‘˜"è§’è‰²
5. å–æ¶ˆå‹¾é€‰ basic ç›¸å…³èœå•

### æ–¹æ¡ˆ3: ç›´æ¥ä¿®æ”¹æ•°æ®åº“ï¼ˆä¸æ¨èï¼‰

```javascript
// è¿æ¥åˆ°ç§Ÿæˆ·æ•°æ®åº“
use mule_68dda6cd04ba0d6c8dda4b7a

// æŸ¥è¯¢ç§Ÿæˆ·ç®¡ç†å‘˜è§’è‰²
db.role.find({code: 'tenant_admin'})

// æ›´æ–°èœå•åˆ—è¡¨ï¼ˆåªä¿ç•™ç³»ç»Ÿç®¡ç†ç›¸å…³ï¼‰
db.role.updateOne(
  {code: 'tenant_admin'},
  {$set: {
    menus: [
      'dashboard',
      'system',
      'system_admin',
      'system_role',
      'system_menu',
      'system_tenant'
    ]
  }}
)
```

---

## ğŸ¯ éªŒè¯

ä¿®å¤åï¼Œç§Ÿæˆ·ç”¨æˆ·åº”è¯¥åªèƒ½çœ‹åˆ°ï¼š

```
ä¾§è¾¹æ èœå•:
â”œâ”€â”€ Dashboard        âœ…
â””â”€â”€ ç³»ç»Ÿç®¡ç†         âœ…
    â”œâ”€â”€ ç®¡ç†å‘˜ç®¡ç†   âœ…
    â”œâ”€â”€ è§’è‰²ç®¡ç†     âœ…
    â”œâ”€â”€ èœå•ç®¡ç†     âœ…
    â””â”€â”€ ç§Ÿæˆ·ç®¡ç†     âœ…

ä¸åº”è¯¥çœ‹åˆ°:
â”œâ”€â”€ åŸºç¡€ä¿¡æ¯         âŒ
â”‚   â”œâ”€â”€ é¢œè‰²ç®¡ç†     âŒ
â”‚   â”œâ”€â”€ å°ºç ç®¡ç†     âŒ
â”‚   â””â”€â”€ ...
```

---

## ğŸ“ éœ€è¦çš„ä¿¡æ¯

è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯å¸®åŠ©è°ƒè¯•ï¼š

1. **æµè§ˆå™¨ F12 Network**
   - `getUserRoutes` è¯·æ±‚çš„å®Œæ•´å“åº”

2. **æ˜¯å¦ä¿®æ”¹è¿‡è§’è‰²**
   - æ˜¯å¦é€šè¿‡"è§’è‰²ç®¡ç†"ä¿®æ”¹è¿‡ç§Ÿæˆ·ç®¡ç†å‘˜è§’è‰²ï¼Ÿ

3. **å‰ç«¯ç¼“å­˜**
   - æ˜¯å¦æ¸…é™¤è¿‡æµè§ˆå™¨ç¼“å­˜å¹¶å¼ºåˆ¶åˆ·æ–°ï¼Ÿ

4. **æ˜¯å¦æ˜¯æ–°åˆ›å»ºçš„ç§Ÿæˆ·**
   - è¿˜æ˜¯æ—§ç§Ÿæˆ·ï¼ˆå¯èƒ½æœ‰å†å²æ•°æ®ï¼‰ï¼Ÿ

æä¾›è¿™äº›ä¿¡æ¯åï¼Œæˆ‘å¯ä»¥æ›´å‡†ç¡®åœ°å®šä½é—®é¢˜ï¼
