# 创建租户用户指南

## 🎯 问题

租户用户 `13838383388` 不存在，需要创建。

## 📝 两种创建方式

### 方式1: 通过前端（推荐）

#### 步骤1: 系统管理员登录

- 账号：`13800138000`
- 密码：`123456`
- 租户：留空（系统管理员不需要选择租户）

#### 步骤2: 切换到目标租户

登录后，在顶部找到"租户选择器"，选择 **"测试 (default)"**。

#### 步骤3: 进入管理员管理

左侧菜单：**系统管理 → 管理员管理**

#### 步骤4: 创建新管理员

点击"新增"按钮，填写信息：

- **手机号**：`13838383388`
- **密码**：`123456`
- **昵称**：`租户管理员`
- **角色**：勾选"租户管理员"（`tenant_admin`）
- **状态**：启用

点击"确定"保存。

#### 步骤5: 测试登录

退出登录，使用新创建的账号登录：
- 账号：`13838383388`
- 密码：`123456`
- 租户：**测试 (default)**

---

### 方式2: 通过 API（快速）

#### 使用 Postman/Curl

**请求**：
```http
POST http://localhost:8080/system/admins
Content-Type: application/json
Authorization: Bearer YOUR_SYSTEM_ADMIN_TOKEN
X-Tenant-Context: 68dda6cd04ba0d6c8dda4b7a

{
  "phone": "13838383388",
  "password": "123456",
  "nickname": "租户管理员",
  "roles": ["租户管理员角色的ID"]
}
```

**说明**：
1. 先用系统管理员登录获取 token
2. 在请求头添加 `X-Tenant-Context: 租户ID`
3. `roles` 需要填写租户管理员角色的实际 ID（ObjectId）

---

## ✅ 推荐流程

**最简单的方法**：

1. 用系统管理员登录（`13800138000`，无需选租户）
2. 顶部切换到租户 "测试 (default)"
3. 进入"系统管理 → 管理员管理"
4. 创建新用户 `13838383388`
5. 退出，用新用户登录测试

---

## 🎯 验证

创建成功后，用新账号登录：

**登录信息**：
- 📱 手机号：`13838383388`
- 🔑 密码：`123456`
- 🏢 租户：**测试 (default)**

**期望结果**：
- ✅ 登录成功
- ✅ 能看到"仪表盘"和"系统管理"菜单
- ✅ 不应该看到"基础信息"相关菜单（颜色、尺码等）

---

## 📊 调试日志

登录成功后，查看 auth 服务的控制台输出：

```
[调试] 角色 xxx 的菜单数量: 6
[调试]   1. dashboard (仪表盘)
[调试]   2. system (系统管理)
[调试]   3. system_admin (管理员管理)
[调试]   4. system_role (角色管理)
[调试]   5. system_menu (菜单管理)
[调试]   6. system_tenant (租户管理)
```

如果看到 `basic`、`color` 等，说明角色配置有问题。

---

## 💡 提示

目前系统中可能还没有创建租户用户，请按以上步骤创建后再测试！
